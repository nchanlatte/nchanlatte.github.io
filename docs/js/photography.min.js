!function(){var i,l,n,r,o,c=document.querySelector(".Gallery-viewer");function u(e,t){var a=new Image;a.onload=t,a.src=e}function a(e){if(e.getBoundingClientRect().top<window.innerHeight+500){var t=e.getAttribute("data-thumb");u(t,function(){e.style.backgroundImage="url("+t+")",e.classList.remove("Gallery-image--preview")})}}function t(){c.classList.add("Gallery-viewer--closing"),c.classList.remove("Gallery-viewer--open"),i=setTimeout(function(){c.classList.remove("Gallery-viewer--closing"),c.style.backgroundImage="",c.style.width="",c.style.height="",c.style.top="",c.style.left=""},500)}Array.prototype.slice.call(document.querySelectorAll("[data-preview]")).forEach(function(t){var e=t.getAttribute("data-preview");t.classList.add("Gallery-image--preview"),u(e,function(){t.getAttribute("data-loaded")<1&&(t.style.backgroundImage="url("+e+")",t.setAttribute("data-loaded",1),a(t))}),t.addEventListener("click",function(e){!function(e){clearTimeout(i);var t=e.getAttribute("data-thumb"),a=e.getAttribute("data-full");e.getAttribute("data-loaded")<3?(c.style.backgroundImage="url("+t+")",u(a,function(){setTimeout(function(){c.style.backgroundImage="url("+a+")",e.setAttribute("data-loaded",3)},500)})):c.style.backgroundImage="url("+a+")";var l=e.getBoundingClientRect();c.style.width=l.width+"px",c.style.height=l.height+"px",c.style.top=l.top+"px",c.style.left=l.left+"px",c.clientHeight,c.classList.add("Gallery-viewer--open")}(t),e.preventDefault()})}),c.addEventListener("click",t),window.addEventListener("scroll",(l=function(){Array.prototype.slice.call(document.querySelectorAll('[data-loaded="1"]')).forEach(a)},n=50,function(){var e=this,t=arguments,a=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||l.apply(e,t)},n),a&&l.apply(e,t)})),document.addEventListener("keyup",function(e){27===e.keyCode&&c.classList.contains("Gallery-viewer--open")&&(t(),e.preventDefault())})}();
//# sourceMappingURL=photography.min.js.map
